<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets">  



    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="http://#{request.serverName}:#{request.serverPort}/achatipicas/layout/css/formPadrao.css" rel="stylesheet" type="text/css" />
    <link href="http://#{request.serverName}:#{request.serverPort}/achatipicas/layout/css/cssLayout.css" rel="stylesheet" type="text/css" />
    <!--<link href="http://#{request.serverName}:#{request.serverPort}/sisOcorrencias/layout/css/default.css" rel="stylesheet" type="text/css" />-->
    <link href="http://#{request.serverName}:#{request.serverPort}/achatipicas/layout/prime/blue/jquery-ui-1.8.16.custom.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript">
        PrimeFaces.locales['pt'] = {
            closeText: 'Fechar',
            prevText: 'Anterior',
            nextText: 'Próximo',
            currentText: 'Começo',
            monthNames: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
            monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
            dayNames: ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'],
            dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'],
            dayNamesMin: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S'],
            weekHeader: 'Semana',
            firstDay: 0,
            isRTL: false,
            showMonthAfterYear: false,
            yearSuffix: '',
            timeOnlyTitle: 'Só Horas',
            timeText: 'Tempo',
            hourText: 'Hora',
            minuteText: 'Minuto',
            secondText: 'Segundo',
            ampm: false,
            month: 'Mês',
            week: 'Semana',
            day: 'Dia',
            allDayText: 'Todo o Dia'
        };
    </script>
    <script>
        /*
         * funcoes que trabalham como um contador do tempo de sessao
         * do usuario.
         */

        var tempoPassado = 00;
        var funcaoTimeout;

        /* tempo maximo de sessao: 30 minutos. */
        var tempoMaximoSessao =#{session.getMaxInactiveInterval()};
        var tempoAtualizacao = 1000;
        var ultimoAcessoDeSessao;


        window.onload = function () {
            ultimoAcessoDeSessao = #{session.getLastAccessedTime()};
            contarTempo();

        }

        function contarTempo()
        {
            document.getElementById('contadorSessao').value = Math.floor((tempoMaximoSessao - tempoPassado) / 60) + ':' + (tempoMaximoSessao - tempoPassado) % 60;
            tempoPassado = tempoPassado + 1;

            //se ultrapassar o tempo maximo, redirecione o usuario para a pagina de login.
            //unidades: segundos.
            if (tempoPassado > tempoMaximoSessao / 1) {
                document.getElementById('contadorSessao').value = 'EXPIRADO!';
                alert('Sua sessão expirou. Você será redirecionado para a página de login.');
                location.href = "faces/login.xhtml";
            }

            funcaoTimeout = setTimeout("contarTempo()", tempoAtualizacao);
        }

        function resetaContador()
        {
            if (tempoPassado > tempoMaximoSessao / 1) {
                //document.getElementById('contadorSessao').value='EXPIRADO!';
                alert('Sua sessão expirou. Você será redirecionado para a página de login.');
                //location.href="/IntranetIterpa/";
                window.location.reload();
            }

            tempoPassado = 0;
            clearTimeout(funcaoTimeout);
            contarTempo();
        }
//        function abrirPgRelatorio() {
//            window.open('http://#{request.serverName}:#{request.serverPort}/ADMLogNETCliente-web/faces/visualizar_pdf.xhtml', '_blank');
//        }
    </script>


    <h:form>
        <!--<h:panelGrid columns="2">-->

        <p:menubar id="menuteste" model="#{loginMB.model}"  style="float: Left;" autoDisplay="false" rendered="#{loginMB.model!=null}" />
        
<!--        <div style="margin-right: 10px; position: relative; float: right;">
            <p:commandButton  value="sair" action="# {loginMB.sair()}" ajax="false" rendered="# {loginMB.usuarioValido!=null}" />
        </div>-->
        <!--</h:panelGrid>-->
    </h:form>



</ui:composition>